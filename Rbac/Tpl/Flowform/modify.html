<form method="post" action="__URL__/modifysubmit/callbackType/closeCurrent/navTabId/{$nodename}" ENCTYPE="multipart/form-data" onsubmit="return validateCallback(this)">

	
<script>
	var global_index=0;
		
	var x1=new Array();
	var x2=new Array();
	var x3=new Array();
	var x4=new Array();
	var x5=new Array();
	var x6=new Array();
	
	var global_key=0;
	var x10=new Array();
	var x60=new Array();
	
	var global_j=0;
	var calc_array=new Array();
	
	var global_i=0;
	function seteffectdisplay(name,value)
	{
		for(global_i=0;global_i<x60.length;global_i++)
		{
			if(name==x60[global_i])
			{
				var tempstr=x10[global_i];
				var temparray=tempstr.split(";");
				console.log(temparray);
				//把他所影响的全部显示出来
				for(var i=0;i<temparray.length;i++)
				{
					var temptemparray=temparray[i].split(":");
					var temptemptemparray=temptemparray[1].split(",");
					for(var j=0;j<temptemptemparray.length;j++)
					{
						document.getElementsByName("td_"+temptemptemparray[j])[0].style.display="";
						document.getElementsByName("td_"+temptemptemparray[j])[1].style.display="";
					}
				}
				//然后根据判断值隐藏
				for(var i=0;i<temparray.length;i++)
				{
					console.log(temparray[i]);
					var temptemparray=temparray[i].split(":");
					if(value==temptemparray[0])
					{
						var temptemptemparray=temptemparray[1].split(",");
						for(var j=0;j<temptemptemparray.length;j++)
						{
							console.log("td_"+temptemptemparray[j]);
							document.getElementsByName("td_"+temptemptemparray[j])[0].style.display="none";
							document.getElementsByName("td_"+temptemptemparray[j])[1].style.display="none";
							document.getElementsByName("td_"+temptemptemparray[j])[1].children[0].value="";
						}
						break;
					}
				}
				break;
			}
		}
	}
</script>

<div class="tabsHeader">
	<div class="tabsHeaderContent">
		<ul>
			<li><a href="javascript:;"><span>{$setting.title}</span></a></li>
		</ul>
	</div>
</div>
<div class="pageContent"> 
	


	<div class="pageFormContent" layoutH="56">

	<input name="approvestatus" id="approvestatus" type="hidden" value="待审批"/>
	<input name="id" id="id" type="hidden" value="{$vo.id}"/>
	<input name="templateid" id="templateid" type="hidden" value="{$setting.id}"/>
	<input name="nodename" id="nodename" type="hidden" value="{$nodename}"/>
	
	
		<!--
		<div style="position:relative;top:0px;margin:0 auto;font-weight:bold;width:614px;">
		<div class="unit">
					<label style="width:55px">申请人:</label>
					<input type="text" readonly
					style="font-size:15px;font-weight:bold;color:#8B0000;position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;" 
					size="18"  name="name" value="{$vo[user]}">


					<label style="position:relative;padding-left:120px;width:65px">申请时间:</label>
					<input readonly="true" value="<?php echo date('Y-m-d',$vo[create_time]); ?>" dateFmt="yyyy年MM月dd日"  type="text" style="width:95px;position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;" size="28"  name="time">
					
					
		</div>
		</div>	
		-->
		<!-- 
		<div class="widewhitetop hidden-xs" style="margin-left:0px;height:41px;">
			<div style="position:relative;top:5px;margin:0 auto;font-weight:normal;width:100%;color:#6B6DA1">
			<label style="font-size:16px;margin-bottom:0px;width:100%;text-align:center;">
			<a style="color:#6B6DA1;margin-left:10px;" href="__URL__/parahistory/id/{$vo.id}" target="dialog" data-toggle="modal" data-target="#modalproject">▪ 内容改动记录</a>
			<a style="color:#6B6DA1;margin-left:10px;" href="__URL__/annexhistory/id/{$vo.id}" target="dialog" data-toggle="modal" data-target="#modalproject">▪ 附件操作日志</a>
			<a style="color:#6B6DA1;margin-left:10px;" href="__URL__/printme/id/{$vo.id}" target="_blank">▪ 打印文档表格</a>
			</label>
			
			</div>	
		</div>
		 -->
		<div class="widewhitecenter" style="margin-left:0px;max-height:500px;padding:10px 20px">
		<table class="drafttable" style="position:relative;margin:0 auto;width:100%;">
		<thead>
					

<!-- 
			<tr>
				<td class="normal" colspan="5" style="padding-top:8px;font-weight:bold;font-size:20px;letter-spacing:4px;font-family:黑体;color:#323299;height:45px;background-color:#CCFFFF;text-align:center">{$setting.title}
				</br><span style="float:right;color:#FF6600;font-size:14px;letter-spacing:0px;font-family:黑体;">文档流水号:{$setting.serial}-{$vo.year}-{$vo.serial}</span></td>
			</tr>	
			<tr>
				<td class="normal" colspan="5" style="padding-top:8px;height:45px;text-align:center">
				<div class="new-comment-content" style="line-height:16px;font-weight:bold;font-size:14px;color:#FF6600;font-family:黑体;">{$setting.subtitle}</div></td>
			</tr>
				 -->
			<volist name="line" id="line">
			<neq name="line[1]" value="">
			<tr>
				<td class="normal" style="font-weight:bold;height:45px;background-color:#F7F7F7;text-align:center;line-height:15px" style="width:15%" name="td_{$line[0]}">{$line[0]}<neq name="line.pararequire0" value=""><font style="color:red;"> *</font></neq></td>
				<td class="normal" colspan="1" style="width:35%" name="td_{$line[0]}">
					<in name="line[paratype0]" value=",0,1,2,3">
					<input type="text" value="{$line[value0]}" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%" <eq name="line[paratype0]" value="3">class="date" onclick="laydate({istime: false, format: 'YYYY-MM-DD'})" dateFmt="yyyy年MM月dd日"</eq>>
					<script>
					var effectarray=eval(<?php echo json_encode($line[paraselect0]);?>);
					var count = effectarray.length;
					if(effectarray[0]!="")
					{
						for(i=0;i<count;i++){
							console.log(effectarray[i]);
							calc_array[global_j]=new Array();
							calc_array[global_j]["effect"]=effectarray[i];
							calc_array[global_j]["name"]='<?php echo $line[para0];?>';
							calc_array[global_j]["calc"]="<?php echo $line[effectdisplay0];?>";
							$("[name='"+effectarray[i]+"']").on('input',function(e)
							{
								var name=this.name;
								console.log(name);
								for(j=0;j<calc_array.length;j++)
								{
									if(name==calc_array[j]["effect"])
									{
										var calc_result=eval(calc_array[j]["calc"]);
										$("[name='"+calc_array[j]["name"]+"']").val(calc_result);
									}
								}
							});
							global_j++;
						}
					
					}
					</script>
					</in>
					
					<eq name="line[paratype0]" value="4">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<?php foreach($depts as $row){ ?>
					<option <eq name="line[value0]" value="$row['name']">selected</eq>><?php echo($row['name']); ?></option>
					<?php }?>
					</select>
					</eq>
					
					<eq name="line[paratype0]" value="5">
					<input type="text" class="date" onclick="laydate({istime: false, format: 'YYYY-MM-DD'})" dateFmt="yyyy年MM月dd日" value="{$line[value0]}" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					</eq>


					
					<eq name="line[paratype0]" value="7">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<?php foreach($roles as $row){ ?>
					<option <eq name="line[value0]" value="$row['name']">selected</eq>><?php echo($row['name']); ?></option>
					<?php }?>
					</select>
					</eq>
					
					<eq name="line[paratype0]" value="9">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option <eq name="line[value0]" value="男">selected</eq>>男</option>
					<option <eq name="line[value0]" value="女">selected</eq>>女</option>
					</select>
					</eq>
					<in name="line[paratype0]" value="10,100">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					
					<?php foreach($line[paraselect0] as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row">selected</eq>><?php echo($row); ?></option>
					<?php }}?>
					</select>
					</in>
					
					<in name="line[paratype0]" value="102">
					<div class="input-group">
					<input type="text" value="{$line[value0]}" name="{$line[para0]}" id="input_{$line[para0]}" class="form-control" style="position:relative;height:29px;background:white;width:500px">
					<div class="input-group-btn">
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
						</ul>
					</div>
					</div>
					<table style="display:none">
					<tbody>
					<?php foreach($line[paraselect0] as $row){ if(($row!="")){?>
						<tr target="sid_obj">
							<td class="class_<?php echo($line[para0]); ?>"><?php echo($row); ?></td>
						</tr>
					<?php }}?>
					</tbody>
					</table>
					<script>
						var dataarray=[];
						var x='<?php echo $line[para0];?>';
						$(".class_"+x).each(function(i){
							dataarray[i]={
								id:"",
								word:$(this).html()
							};
						})
						//data 数据中获取
						var testdataBsSuggest = $("#input_"+x).bsSuggest({
							showBtn:true,
							ignorecase:true,
							indexId: -1, //每组数据的第几个数据，作为input输入框的 data-id，设为 -1 且 idField 为空则不设置此值
							indexKey: 1, //data.value 的第几个数据，作为input输入框的内容
							data: {
								'value': dataarray
							}
						});
						$("input#input_"+x).on("onSetSelectValue", function (event, result) {
							this.value=result.key;
							if(typeof getSource3 === "function")
							{
								getSource3(this);
							}
							return false;
						});
					</script>
					</in>
					
					<in name="line[paratype0]" value="101">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="{$line[value0]}">{$line[value0]}</option>
					</select>
					<script>
					x1[global_index]='<?php echo $line[paraselectarray0][0];?>';//绑定字段
					x2[global_index]='<?php echo $line[paraselectarray0][1];?>';//表名
					x3[global_index]='<?php echo $line[paraselectarray0][2];?>';//绑定字段表字段名
					x4[global_index]='<?php echo $line[paraselectarray0][3];?>';//表字段名
					x5[global_index]='<?php echo $line[paraselectarray0][4];?>';//条件
					x6[global_index]='<?php echo $line[para0];?>';
					$("[name='"+x1[global_index]+"']").on('change',function(e)
					{
						var name=this.name;
						for(global_i=0;global_i<x1.length;global_i++)
						{
							if(name==x1[global_i])
							{
								break;
							}
						}
						var objectModel = {};
						objectModel['bindingtable']=x2[global_i];
						objectModel['bindingpara']=x3[global_i];
						objectModel['para']=x4[global_i];
						objectModel['condition']=x5[global_i];
						objectModel['value']=this.value;
						$.ajax({
							cache:false,
							type:"POST",
							url:"__APP__/Flowform/getSource",
							dataType:"json",
							data:objectModel,
							error:function(){
								//alert("网络错误");
							},
							success:function(data)
							{
								if((data!==undefined)&&(data!=="")&&(data!==null))
								{
									$("[name='"+x6[global_i]+"']").empty();
									var count = data.length;
									console.log(count);
									console.log(data);
									var i = 0;
									var b="<option value=''>==请选择==</option>";
									for(i=0;i<count;i++){
									   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
									}
									$("[name='"+x6[global_i]+"']").append(b);
									$("[name='"+x6[global_i]+"']").find("option").eq(1).prop("selected",true);
									$("[name='"+x6[global_i]+"']").trigger("change");
									//document.getElementById("waysub1").style.display="block";
								}
							}
						});
					
					});
					global_index++;
					</script>
					</in>
				
					<eq name="line[paratype0]" value="11">
					<textarea type="text" name="{$line[para0]}" style="height:67px;position:relative;background:white;width:100%">{$line[value0]}</textarea>
					</eq>
					
					
					<eq name="line[paratype0]" value="12">
					<input type="text" value="{$line[value0]}" id="{$line[para0]}" name="{$line[para0]}" onclick="selectGroup('{$line[para0]}','pidtemp')" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<input type="hidden" class="" name="pidtemp" id="pidtemp">	
					</eq>
					<eq name="line[paratype0]" value="13">
					<input type="text" value="{$line[value0]}" id="{$line[para0]}" name="{$line[para0]}" onclick="selectGroupmulti('{$line[para0]}','pidtemp')" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<input type="hidden" class="" name="pidtemp" id="pidtemp">	
					</eq>
					
					<eq name="line[paratype0]" value="14">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($projects as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['plmName']">selected</eq> value="<?php echo($row["plmName"]); ?>"><?php echo($row["plmName"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
					<eq name="line[paratype0]" value="15">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($agreements as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['name']">selected</eq> value="<?php echo($row["name"]); ?>"><?php echo($row["name"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
					<eq name="line[paratype0]" value="16">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($buys as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['title']">selected</eq> value="<?php echo($row["title"]); ?>"><?php echo($row["title"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
					<eq name="line[paratype0]" value="17">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($clients as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['khmc']">selected</eq> value="<?php echo($row["khmc"]); ?>"><?php echo($row["khmc"]); ?></option>
					<?php }}?>
					</select>
					</eq>
				</td>
				<td class="normal" style="font-weight:bold;height:45px;background-color:#F7F7F7;text-align:center;line-height:15px" style="width:15%" name="td_{$line[1]}">{$line[1]}<neq name="line.pararequire1" value=""><font style="color:red"> *</font></neq></td>
				<td class="normal" colspan="1" style="width:35%" name="td_{$line[1]}">
			
					<in name="line[paratype1]" value=",0,1,2,3">
					<input type="text" value="{$line[value1]}" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%" <eq name="line[paratype1]" value="3">class="date" onclick="laydate({istime: false, format: 'YYYY-MM-DD'})" dateFmt="yyyy年MM月dd日"</eq>>
					<script>
					var effectarray=eval(<?php echo json_encode($line[paraselect1]);?>);
					var count = effectarray.length;
					if(effectarray[0]!="")
					{
						for(i=0;i<count;i++){
							console.log(effectarray[i]);
							calc_array[global_j]=new Array();
							calc_array[global_j]["effect"]=effectarray[i];
							calc_array[global_j]["name"]='<?php echo $line[para1];?>';
							calc_array[global_j]["calc"]="<?php echo $line[effectdisplay1];?>";
							$("[name='"+effectarray[i]+"']").on('input',function(e)
							{
								var name=this.name;
								console.log(name);
								for(j=0;j<calc_array.length;j++)
								{
									if(name==calc_array[j]["effect"])
									{
										var calc_result=eval(calc_array[j]["calc"]);
										$("[name='"+calc_array[j]["name"]+"']").val(calc_result);
									}
								}
							});
							global_j++;
						}
					
					}
					</script>
					</in>

					<eq name="line[paratype1]" value="4">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<?php foreach($depts as $row){ ?>
					<option <eq name="line[value1]" value="$row['name']">selected</eq>><?php echo($row['name']); ?></option>
					<?php }?>
					</select>
					</eq>
					
					<eq name="line[paratype1]" value="5">
					<input type="text" class="date" onclick="laydate({istime: false, format: 'YYYY-MM-DD'})" dateFmt="yyyy年MM月dd日" value="{$line[value1]}" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					</eq>
					
					<eq name="line[paratype1]" value="7">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<?php foreach($roles as $row){ ?>
					<option <eq name="line[value1]" value="$row['name']">selected</eq>><?php echo($row['name']); ?></option>
					<?php }?>
					</select>
					</eq>
					
					<eq name="line[paratype1]" value="9">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option <eq name="line[value1]" value="男">selected</eq>>男</option>
					<option <eq name="line[value1]" value="女">selected</eq>>女</option>
					</select>
					</eq>
					<in name="line[paratype1]" value="10,100">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<?php foreach($line[paraselect1] as $row){ if(($row!="")){?>
					<option <eq name="line[value1]" value="$row">selected</eq>><?php echo($row); ?></option>
					<?php }}?>
					</select>
					</in>
					
					<in name="line[paratype1]" value="102">
					<div class="input-group">
					<input type="text" value="{$line[value1]}" name="{$line[para1]}" id="input_{$line[para1]}" class="form-control" style="position:relative;height:29px;background:white;width:500px">
					<div class="input-group-btn">
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
						</ul>
					</div>
					</div>
					<table style="display:none">
					<tbody>
					<?php foreach($line[paraselect1] as $row){ if(($row!="")){?>
						<tr target="sid_obj">
							<td class="class_<?php echo($line[para1]); ?>"><?php echo($row); ?></td>
						</tr>
					<?php }}?>
					</tbody>
					</table>
					<script>
						var dataarray=[];
						var x='<?php echo $line[para1];?>';
						$(".class_"+x).each(function(i){
							dataarray[i]={
								id:"",
								word:$(this).html()
							};
						})
						//data 数据中获取
						var testdataBsSuggest = $("#input_"+x).bsSuggest({
							showBtn:true,
							ignorecase:true,
							indexId: -1, //每组数据的第几个数据，作为input输入框的 data-id，设为 -1 且 idField 为空则不设置此值
							indexKey: 1, //data.value 的第几个数据，作为input输入框的内容
							data: {
								'value': dataarray
							}
						});
						$("input#input_"+x).on("onSetSelectValue", function (event, result) {
							this.value=result.key;
							if(typeof getSource3 === "function")
							{
								getSource3(this);
							}
							return false;
						});
					</script>
					</in>
					
					<in name="line[paratype1]" value="101">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="{$line[value1]}">{$line[value1]}</option>
					</select>
					<script>
					x1[global_index]='<?php echo $line[paraselectarray1][0];?>';//绑定字段
					x2[global_index]='<?php echo $line[paraselectarray1][1];?>';//表名
					x3[global_index]='<?php echo $line[paraselectarray1][2];?>';//绑定字段表字段名
					x4[global_index]='<?php echo $line[paraselectarray1][3];?>';//表字段名
					x5[global_index]='<?php echo $line[paraselectarray1][4];?>';//条件
					x6[global_index]='<?php echo $line[para1];?>';
					$("[name='"+x1[global_index]+"']").on('change',function(e)
					{
						var name=this.name;
						for(global_i=0;global_i<x1.length;global_i++)
						{
							if(name==x1[global_i])
							{
								break;
							}
						}
						var objectModel = {};
						objectModel['bindingtable']=x2[global_i];
						objectModel['bindingpara']=x3[global_i];
						objectModel['para']=x4[global_i];
						objectModel['condition']=x5[global_i];
						objectModel['value']=this.value;
						$.ajax({
							cache:false,
							type:"POST",
							url:"__APP__/Flowform/getSource",
							dataType:"json",
							data:objectModel,
							error:function(){
								//alert("网络错误");
							},
							success:function(data)
							{
								if((data!==undefined)&&(data!=="")&&(data!==null))
								{
									$("[name='"+x6[global_i]+"']").empty();
									var count = data.length;
									console.log(count);
									console.log(data);
									var i = 0;
									var b="<option value=''>==请选择==</option>";
									for(i=0;i<count;i++){
									   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
									}
									$("[name='"+x6[global_i]+"']").append(b);
									$("[name='"+x6[global_i]+"']").find("option").eq(1).prop("selected",true);
									$("[name='"+x6[global_i]+"']").trigger("change");
									//document.getElementById("waysub1").style.display="block";
								}
							}
						});
					
					});
					global_index++;
					</script>
					</in>
					
					<eq name="line[paratype1]" value="11">
					<textarea type="text" name="{$line[para1]}" style="height:67px;position:relative;background:white;width:100%">{$line[value1]}</textarea>
					</eq>
					
					
					<eq name="line[paratype1]" value="12">
					<input type="text" value="{$line[value1]}" id="{$line[para1]}" name="{$line[para1]}" onclick="selectGroup('{$line[para1]}','pidtemp')" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<input type="hidden" class="" name="pidtemp" id="pidtemp">	
					</eq>
					<eq name="line[paratype1]" value="13">
					<input type="text" value="{$line[value1]}" id="{$line[para1]}" name="{$line[para1]}" onclick="selectGroupmulti('{$line[para1]}','pidtemp')" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<input type="hidden" class="" name="pidtemp" id="pidtemp">	
					</eq>
					
					<eq name="line[paratype1]" value="14">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($projects as $row){ if(($row!="")){?>
					<option <eq name="line[value1]" value="$row['plmName']">selected</eq> value="<?php echo($row["plmName"]); ?>"><?php echo($row["plmName"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
					<eq name="line[paratype1]" value="15">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($agreements as $row){ if(($row!="")){?>
					<option <eq name="line[value1]" value="$row['name']">selected</eq> value="<?php echo($row["name"]); ?>"><?php echo($row["name"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
					<eq name="line[paratype1]" value="16">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($buys as $row){ if(($row!="")){?>
					<option <eq name="line[value1]" value="$row['title']">selected</eq> value="<?php echo($row["title"]); ?>"><?php echo($row["title"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
					<eq name="line[paratype1]" value="17">
					<select type="text" name="{$line[para1]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($clients as $row){ if(($row!="")){?>
					<option <eq name="line[value1]" value="$row['khmc']">selected</eq> value="<?php echo($row["khmc"]); ?>"><?php echo($row["khmc"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
				</td>
			</tr>
			<notin name="line[paratype0]" value="0,1,2,3">
			<script>
			x10[global_key]='<?php echo $line[effectdisplay0];?>';//绑定字段
			x60[global_key]='<?php echo $line[para0];?>';
			if(x10[global_key]!="")
			{
				$("[name='"+x60[global_key]+"']").on('change',function(e)
				{
					var name=this.name;
					var value=this.value;
					seteffectdisplay(name,value);
				});
			
				seteffectdisplay(x60[global_key],document.getElementsByName(x60[global_key])[0].value);
			}
			global_key++;
			</script>
			</notin>
			<notin name="line[paratype1]" value="0,1,2,3">
			<script>
			x10[global_key]='<?php echo $line[effectdisplay1];?>';//绑定字段
			x60[global_key]='<?php echo $line[para1];?>';
			if(x10[global_key]!="")
			{
				$("[name='"+x60[global_key]+"']").on('change',function(e)
				{
					var name=this.name;
					var value=this.value;
					seteffectdisplay(name,value);
				});
			
				seteffectdisplay(x60[global_key],document.getElementsByName(x60[global_key])[0].value);
			}
			global_key++;
			</script>
			</notin>
			</neq>
			<eq name="line[1]" value="">
			<tr>
				<td class="normal" style="font-weight:bold;height:45px;background-color:#F7F7F7;text-align:center;line-height:15px" style="width:25%" name="td_{$line[0]}">{$line[0]}<neq name="line.pararequire0" value=""><font style="color:red"> *</font></neq></td>
				<td class="normal" colspan="3" style="width:75%" name="td_{$line[0]}">
				
					<in name="line[paratype0]" value=",0,1,2,3">
					<input type="text" value="{$line[value0]}" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%" <eq name="line[paratype0]" value="3">class="date" onclick="laydate({istime: false, format: 'YYYY-MM-DD'})" dateFmt="yyyy年MM月dd日"</eq>>
					<script>
					var effectarray=eval(<?php echo json_encode($line[paraselect0]);?>);
					var count = effectarray.length;
					if(effectarray[0]!="")
					{
						for(i=0;i<count;i++){
							console.log(effectarray[i]);
							calc_array[global_j]=new Array();
							calc_array[global_j]["effect"]=effectarray[i];
							calc_array[global_j]["name"]='<?php echo $line[para0];?>';
							calc_array[global_j]["calc"]="<?php echo $line[effectdisplay0];?>";
							$("[name='"+effectarray[i]+"']").on('input',function(e)
							{
								var name=this.name;
								console.log(name);
								for(j=0;j<calc_array.length;j++)
								{
									if(name==calc_array[j]["effect"])
									{
										var calc_result=eval(calc_array[j]["calc"]);
										$("[name='"+calc_array[j]["name"]+"']").val(calc_result);
									}
								}
							});
							global_j++;
						}
					
					}
					</script>
					</in>
					
					<eq name="line[paratype0]" value="4">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<?php foreach($depts as $row){ ?>
					<option <eq name="line[value0]" value="$row['name']">selected</eq>><?php echo($row['name']); ?></option>
					<?php }?>
					</select>
					</eq>
					
					<eq name="line[paratype0]" value="5">
					<input type="text" class="date" onclick="laydate({istime: false, format: 'YYYY-MM-DD'})" dateFmt="yyyy年MM月dd日" value="{$line[value0]}" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					</eq>
					
					<eq name="line[paratype0]" value="7">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<?php foreach($roles as $row){ ?>
					<option <eq name="line[value0]" value="$row['name']">selected</eq>><?php echo($row['name']); ?></option>
					<?php }?>
					</select>
					</eq>
					
					<eq name="line[paratype0]" value="9">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option <eq name="line[value0]" value="男">selected</eq>>男</option>
					<option <eq name="line[value0]" value="女">selected</eq>>女</option>
					</select>
					</eq>
					<in name="line[paratype0]" value="10,100">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option>{$line[value0]}</option>
					<option value="">==请选择==</option>
					<?php foreach($line[paraselect0] as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row">selected</eq>><?php echo($row); ?></option>
					<?php }}?>
					</select>
					</in>
					
					<in name="line[paratype0]" value="102">
					<div class="input-group">
					<input type="text" value="{$line[value0]}" name="{$line[para0]}" id="input_{$line[para0]}" class="form-control" style="position:relative;height:29px;background:white;width:100%">
					<div class="input-group-btn">
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
						</ul>
					</div>
					</div>
					<table style="display:none">
					<tbody>
					<?php foreach($line[paraselect0] as $row){ if(($row!="")){?>
						<tr target="sid_obj">
							<td class="class_<?php echo($line[para0]); ?>"><?php echo($row); ?></td>
						</tr>
					<?php }}?>
					</tbody>
					</table>
					<script>
						var dataarray=[];
						var x='<?php echo $line[para0];?>';
						$(".class_"+x).each(function(i){
							dataarray[i]={
								id:"",
								word:$(this).html()
							};
						})
						//data 数据中获取
						var testdataBsSuggest = $("#input_"+x).bsSuggest({
							showBtn:true,
							ignorecase:true,
							indexId: -1, //每组数据的第几个数据，作为input输入框的 data-id，设为 -1 且 idField 为空则不设置此值
							indexKey: 1, //data.value 的第几个数据，作为input输入框的内容
							data: {
								'value': dataarray
							}
						});
						$("input#input_"+x).on("onSetSelectValue", function (event, result) {
							this.value=result.key;
							return false;
						});
					</script>
					</in>
					
					<in name="line[paratype0]" value="101">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="{$line[value0]}">{$line[value0]}</option>
					</select>
					<script>
					x1[global_index]='<?php echo $line[paraselectarray0][0];?>';//绑定字段
					x2[global_index]='<?php echo $line[paraselectarray0][1];?>';//表名
					x3[global_index]='<?php echo $line[paraselectarray0][2];?>';//绑定字段表字段名
					x4[global_index]='<?php echo $line[paraselectarray0][3];?>';//表字段名
					x5[global_index]='<?php echo $line[paraselectarray0][4];?>';//条件
					x6[global_index]='<?php echo $line[para0];?>';
					$("[name='"+x1[global_index]+"']").on('change',function(e)
					{
						var name=this.name;
						for(global_i=0;global_i<x1.length;global_i++)
						{
							if(name==x1[global_i])
							{
								break;
							}
						}
						var objectModel = {};
						objectModel['bindingtable']=x2[global_i];
						objectModel['bindingpara']=x3[global_i];
						objectModel['para']=x4[global_i];
						objectModel['condition']=x5[global_i];
						objectModel['value']=this.value;
						$.ajax({
							cache:false,
							type:"POST",
							url:"__APP__/Flowform/getSource",
							dataType:"json",
							data:objectModel,
							error:function(){
								//alert("网络错误");
							},
							success:function(data)
							{
								if((data!==undefined)&&(data!=="")&&(data!==null))
								{
									$("[name='"+x6[global_i]+"']").empty();
									var count = data.length;
									console.log(count);
									console.log(data);
									var i = 0;
									var b="<option value=''>==请选择==</option>";
									for(i=0;i<count;i++){
									   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
									}
									$("[name='"+x6[global_i]+"']").append(b);
									$("[name='"+x6[global_i]+"']").find("option").eq(1).prop("selected",true);
									$("[name='"+x6[global_i]+"']").trigger("change");
									//document.getElementById("waysub1").style.display="block";
								}
							}
						});
					
					});
					global_index++;
					</script>
					</in>
					
					<eq name="line[paratype0]" value="11">
					<textarea type="text" name="{$line[para0]}" style="height:67px;position:relative;background:white;width:100%">{$line[value0]}</textarea>
					</eq>
				
					<eq name="line[paratype0]" value="12">
					<input type="text" value="{$line[value0]}" id="{$line[para0]}" name="{$line[para0]}" onclick="selectGroup('{$line[para0]}','pidtemp')" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<input type="hidden" class="" name="pidtemp" id="pidtemp">	
					</eq>
					<eq name="line[paratype0]" value="13">
					<input type="text" value="{$line[value0]}" id="{$line[para0]}" name="{$line[para0]}" onclick="selectGroupmulti('{$line[para0]}','pidtemp')" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<input type="hidden" class="" name="pidtemp" id="pidtemp">	
					</eq>
					
					<eq name="line[paratype0]" value="14">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($projects as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['plmName']">selected</eq> value="<?php echo($row["plmName"]); ?>"><?php echo($row["plmName"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					<eq name="line[paratype0]" value="15">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($agreements as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['name']">selected</eq> value="<?php echo($row["name"]); ?>"><?php echo($row["name"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					<eq name="line[paratype0]" value="16">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($buys as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['title']">selected</eq> value="<?php echo($row["title"]); ?>"><?php echo($row["title"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					<eq name="line[paratype0]" value="17">
					<select type="text" name="{$line[para0]}" style="position:relative;border:0px;border-bottom:1px solid #BBBBBB;height:29px;background:white;width:100%">
					<option value="">==请选择==</option>
					<?php foreach($clients as $row){ if(($row!="")){?>
					<option <eq name="line[value0]" value="$row['khmc']">selected</eq> value="<?php echo($row["khmc"]); ?>"><?php echo($row["khmc"]); ?></option>
					<?php }}?>
					</select>
					</eq>
					
					
					<eq name="line[paratype0]" value="103">
					<neq name="vo.file1" value="">
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<a class="fancybox" href="__PUBLIC__/Uploads/{$vo['file1']}" data-fancybox-group="gallery_handingover" title="image">
						<img src="__PUBLIC__/Uploads/{$vo['file1']}" width="194" height="194" style="width:100px;height:100px">
					</a>
					</div>
					</neq>
					<neq name="vo.file2" value="">
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<a class="fancybox" href="__PUBLIC__/Uploads/{$vo['file2']}" data-fancybox-group="gallery_handingover" title="image">
						<img src="__PUBLIC__/Uploads/{$vo['file2']}" width="194" height="194" style="width:100px;height:100px">
					</a>
					</div>
					</neq>
					<neq name="vo.file3" value="">
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<a class="fancybox" href="__PUBLIC__/Uploads/{$vo['file3']}" data-fancybox-group="gallery_handingover" title="image">
						<img src="__PUBLIC__/Uploads/{$vo['file3']}" width="194" height="194" style="width:100px;height:100px">
					</a>
					</div>
					</neq>
					<neq name="vo.file4" value="">
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<a class="fancybox" href="__PUBLIC__/Uploads/{$vo['file4']}" data-fancybox-group="gallery_handingover" title="image">
						<img src="__PUBLIC__/Uploads/{$vo['file4']}" width="194" height="194" style="width:100px;height:100px">
					</a>
					</div>
					</neq>
					<neq name="vo.file5" value="">
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<a class="fancybox" href="__PUBLIC__/Uploads/{$vo['file5']}" data-fancybox-group="gallery_handingover" title="image">
						<img src="__PUBLIC__/Uploads/{$vo['file5']}" width="194" height="194" style="width:100px;height:100px">
					</a>
					</div>
					</neq>
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<video id="video" width="600" height="600"></video>
					</div>
					
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<canvas id="canvas_1" width="600" height="600" style="width:100px;height:100px;float:left"></canvas>
					</div>
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<canvas id="canvas_2" width="600" height="600" style="width:100px;height:100px;float:left"></canvas>
					</div>
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<canvas id="canvas_3" width="600" height="600" style="width:100px;height:100px;float:left"></canvas>
					</div>
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<canvas id="canvas_4" width="600" height="600" style="width:100px;height:100px;float:left"></canvas>
					</div>
					<div style="width:100px;height:100px;float:left;margin-right:10px;">
					<canvas id="canvas_5" width="600" height="600" style="width:100px;height:100px;float:left"></canvas>
					</div>
					<textarea id="box_1" name="base64_1" style="display:none"></textarea>
					<textarea id="box_2" name="base64_2" style="display:none"></textarea>
					<textarea id="box_3" name="base64_3" style="display:none"></textarea>
					<textarea id="box_4" name="base64_4" style="display:none"></textarea>
					<textarea id="box_5" name="base64_5" style="display:none"></textarea>
					<div style="width:100%">
					<a class="btn btn-info btn-xs" href="javascript:saveFile(filename)" onclick="dd()" style="verticle-align:top;float:left">拍照</a>
					</div>
					<script>
					
					var current=1;
					//用来匹配不同的浏览器
					function getUserMedia(constraints,success,error){
						if(navigator.mediaDevices.getUserMedia){
							navigator.mediaDevices.getUserMedia(constraints).then(success).catch(error);
						}else if (navigator.webkitGetUserMedia) {
							navigator.webkitGetUserMedia(constraints,success,error);
						}else if (navigator.mozGetUserMedia) {
							navigator.mozGetUserMedia(constraints,success,error);
						}else if (navigator.getUserMedia) {
							navigator.getUserMedia(constraints,success,error)
						}
					}
					
					let video = document.getElementById('video');
					
					//成功回调
					function success(stream){
						video.srcObject = stream;
						video.play();
					}
					//失败回调
					function error(error) {
						console.log("访问用户媒体失败");
					}
					//开启摄像头
					if (navigator.mediaDevices.getUserMedia || navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia) {
						getUserMedia({video:{width:600,height:600}},success,error)
					}else {
						alert("不支持");
					}
					//实现拍照的功能
					function dd(){
						let canvas = document.getElementById('canvas_'+current);
						let context = canvas.getContext('2d');
						context.drawImage(video,0,0,600,600);
					}
					//下面的代码是保存canvas标签里的图片并且将其按一定的规则重命名
					var type = 'jpg';
					var _fixType = function(type) {
					type = type.toLowerCase().replace(/jpg/i, 'jpeg');
					var r = type.match(/png|jpeg|bmp|gif/)[0];
					return 'image/' + r;
					};

					var saveFile = function(filename){
						//获取canvas标签里的图片内容
						var imgData = document.getElementById('canvas_'+current).toDataURL(type);
						imgData = imgData.replace(_fixType(type),'image/octet-stream');
						
						//var save_link = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');
						//save_link.href = imgData; //base64码
						//save_link.download = filename;//图片名称
						
						var divbox=document.getElementById("box_"+current);
						divbox.innerText=imgData;
						if(current==5)
						{
							alert("不能再添加了");
							return;
						}
						current++;
						
					};
					// 下载后的文件名规则
					var filename =11111+ '.' + type;
					
					</script>
					</eq>	
				</td>
			</tr>
			<notin name="line[paratype0]" value="0,1,2,3">
			<script>
			x10[global_key]='<?php echo $line[effectdisplay0];?>';//绑定字段
			x60[global_key]='<?php echo $line[para0];?>';
			if(x10[global_key]!="")
			{
				$("[name='"+x60[global_key]+"']").on('change',function(e)
				{
					var name=this.name;
					var value=this.value;
					seteffectdisplay(name,value);
				});
				seteffectdisplay(x60[global_key],document.getElementsByName(x60[global_key])[0].value);
			}
			global_key++;
			</script>
			</notin>
			</eq>
			</volist>
			
			<!--
			<tr>
				<td class="normal" style="font-weight:bold;height:85px;background-color:#F7F7F7;width:90px;text-align:center">备注</td>
				<td class="normal" colspan="3">
				<textarea type="text" name="remark"style="position:relative;border:1px solid #BBBBBB;height:60px;background:white;width:100%">{$vo.remark}</textarea></td>
			</tr>
			-->
			<neq name="setting[annex]" value="">
			<tr>
				<td class="normal" style="font-weight:bold;background-color:#F7F7F7;text-align:center">上传附件</td>
				<td class="normal"  colspan="3">
					<div class="unit1" style="height:128px;">
						<div style="text-align:left">
							<a onclick="fnClickAddRow();" href="javascript:void(0);" class="btn btn-primary btn-xs">添加</a>
						</div>
						<table addButton="添加附件" width="60%">
							<thead style="display:none">
								<tr>
									<th type="file" name="file[#index#]" size="15" fieldClass="file huge">组件名</th>
									<th type="del" width="60">操作</th>
								</tr>
							</thead>
							<tbody id="tab_M">
							
								<for start="0" end="15">
									<neq name="vo.file$i" value="">
									<tr><td><input type="hidden" name="recordrealname$i" value="{$vo.filerealname$i}"><input type="hidden" name="record$i" value="{$vo.file$i}">
									<a href="__URL__/filedown/file/{$vo.file$i}/filerealname/{$vo.filerealname$i}" style="color:#323299">{$vo.filerealname$i}</a></td><td><a href="javascript:void(0)" class="btnDel">删除</a></td></tr>
									</neq>
								</for>
							
							</tbody>
						</table>
					</div>
				</td>
			</tr>
			</neq>
			<!-- 
			<tr>
				<td class="normal" colspan="4" style="font-weight:bold;height:25px;background-color:#CCFFFF;text-align:center">审批意见栏</td>
			</tr>
			
			<for start="0" end="14">
			<?php if($setting["dept".$i]){?>
			<tr>
				<td class="normal" style="font-weight:bold;background-color:#F7F7F7;height:65px;text-align:center"><?php echo($setting["dept".$i]);?></td>
				<td class="normal"  colspan="3" style="line-height:18px;padding-left:10px;color:#323299">
					<div class='new-comment-content' style="line-height:15px"><?php echo($vo["dept".$i]);?></div>
				</td>
			<tr>
			<?php }?>
			</for>
			
			<script>
			$(function(){
				 var element = $("div[class='new-comment-content']");
				 for(i=0;i<element.length;i++)
				 {
					var temp =  element.eq(i).html().replace(/\n/g,'<br>');
					element.eq(i).html(temp);
				 }
			});
			</script>
			 -->
			<!-- <tr>
				<td class="normal" style="font-weight:bold;height:85px;background-color:#F7F7F7;text-align:center">执行意见签署</td>
				<td class="normal" colspan="3">
				<textarea type="text" name="execute" readonly style="position:relative;border:1px solid #BBBBBB;height:60px;background:white;width:100%">{$vo.execute}</textarea></td>
			</tr>   --> 
			
			</thead>
			</table>
			</div>
			<div class="widewhitebottom" style="margin-left:0px;height:5px;">
			</div>
		</div>	
		<!-- 
		<div class="formBar">
			<ul  style="float:right;">
				<li>
				<font style="position:relative;top:0px;">审核：</font>
				<input type="text" readonly="true" size="20" id="approver" name="approver" value="{$approver}"/></input>
				</li>
				<li>
				<a style="position:relative;top:0px;cursor:hand" width="420" height="320" href="javascript:selectGroup()" lookupGroup="">
				<div class="btn btn-primary" style="position:relative;cursor:hand"><div class="buttonContent">选择审核人</div></div>
				</a>
				</li>
				<input name="{$tablename}onlysave" id="{$tablename}onlysave" type="hidden" value="">
			</ul>
		</div> -->
		<div class="formBar">
			<ul>
				<input name="{$tablename}onlysave" id="{$tablename}onlysave" type="hidden" value="">
				<li style=""><div class="buttonActive"><div class="buttonContent"><button type="submit" onclick="document.getElementById('{$tablename}onlysave').value='';">提交</button></div></div></li>
				<!-- <li style=""><div class="buttonActive"><div class="buttonContent"><button type="submit" onclick="document.getElementById('{$tablename}onlysave').value='1';">保存</button></div></div></li> -->
				<li><div class="button"><div class="buttonContent"><button type="button" class="close1" data-dismiss="modal">关闭</button></div></div></li>
			</ul>
		</div>

</div>

</form>










<!--特殊处理-->
<eq name="setting.title" value="税筹合同">
<script>
$("[name='accounttype']").on('change',function(e)
{
	var name=this.name;
	var objectModel = {};
	objectModel['accounttype']=document.getElementsByName("accounttype")[0].value;
	objectModel['plmtype']=document.getElementsByName("plmtype")[0].value;
	objectModel['plmsubtype']=document.getElementsByName("plmsubtype")[0].value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource1",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='classify']").empty();
				var count = data.length;
				console.log(count);
				console.log(data);
				var i = 0;
				var b="<option value=''>==请选择==</option>";
				for(i=0;i<count;i++){
				   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
				}
				$("[name='classify").append(b);
				$("[name='classify").find("option").eq(1).prop("selected",true);
				$("[name='classify']").trigger("change");
			}
		}
	});

});
</script>
</eq>
<eq name="setting.title" value="投资">
<script>
$("[name='accounttype']").on('change',function(e)
{
	var plmtype=document.getElementsByName("plmtype")[0].value;
	var accounttype=document.getElementsByName("accounttype")[0].value;
	if(plmtype=="股权项目")
	{
		if(accounttype=="损益")
		{
			document.getElementsByName("td_所占股比")[0].style.display="none";
			document.getElementsByName("td_所占股比")[1].style.display="none";
		}
		if(accounttype=="转入")
		{
			document.getElementsByName("td_所占股比")[0].style.display="";
			document.getElementsByName("td_所占股比")[1].style.display="";
		}
		if(accounttype=="转出")
		{
			document.getElementsByName("td_所占股比")[0].style.display="none";
			document.getElementsByName("td_所占股比")[1].style.display="none";
		}
	}
	if(plmtype=="固收项目")
	{
		if(accounttype=="损益")
		{
			document.getElementsByName("td_到期日")[0].style.display="none";
			document.getElementsByName("td_到期日")[1].style.display="none";
			document.getElementsByName("td_预期收益率")[0].style.display="none";
			document.getElementsByName("td_预期收益率")[1].style.display="none";
		}
		if(accounttype=="转入")
		{
			document.getElementsByName("td_到期日")[0].style.display="";
			document.getElementsByName("td_到期日")[1].style.display="";
			document.getElementsByName("td_预期收益率")[0].style.display="";
			document.getElementsByName("td_预期收益率")[1].style.display="";
		}
		if(accounttype=="转出")
		{
			document.getElementsByName("td_到期日")[0].style.display="none";
			document.getElementsByName("td_到期日")[1].style.display="none";
			document.getElementsByName("td_预期收益率")[0].style.display="none";
			document.getElementsByName("td_预期收益率")[1].style.display="none";
		}
	}
	if(plmtype=="动产及不动产")
	{
		if(accounttype=="贬值")
		{
			document.getElementsByName("td_项目分类")[0].style.display="none";
			document.getElementsByName("td_项目分类")[1].style.display="none";
		}
		if(accounttype=="增值")
		{
			document.getElementsByName("td_项目分类")[0].style.display="none";
			document.getElementsByName("td_项目分类")[1].style.display="none";
		}
		if(accounttype=="转入")
		{
			document.getElementsByName("td_项目分类")[0].style.display="none";
			document.getElementsByName("td_项目分类")[1].style.display="none";
		}
		if(accounttype=="转出")
		{
			document.getElementsByName("td_项目分类")[0].style.display="none";
			document.getElementsByName("td_项目分类")[1].style.display="none";
		}
		if(accounttype=="支出")
		{
			document.getElementsByName("td_项目分类")[0].style.display="";
			document.getElementsByName("td_项目分类")[1].style.display="";
		}
		if(accounttype=="收益")
		{
			document.getElementsByName("td_项目分类")[0].style.display="";
			document.getElementsByName("td_项目分类")[1].style.display="";
		}
	}
	
	var name=this.name;
	var objectModel = {};
	objectModel['accounttype']=document.getElementsByName("accounttype")[0].value;
	objectModel['plmtype']=document.getElementsByName("plmtype")[0].value;
	objectModel['plmsubtype']=document.getElementsByName("plmsubtype")[0].value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource1",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='classify']").empty();
				var count = data.length;
				console.log(count);
				console.log(data);
				var i = 0;
				var b="<option value=''>==请选择==</option>";
				for(i=0;i<count;i++){
				   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
				}
				$("[name='classify").append(b);
				$("[name='classify").find("option").eq(1).prop("selected",true);
				$("[name='classify']").trigger("change");
			}
		}
	});

});
$("[name='plmname']").on("change", function (event, result) {
	//找币种
	var accounttype=document.getElementsByName("accounttype")[0].value;
	if((accounttype=="")||(accounttype=="贬值")||(accounttype=="增值"))
	{
		
	}
	else
	{
		return;
	}
	$("[name='currency").val("");
	var objectModel = {};
	objectModel['name']=this.value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource4_1",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='currency").val(data);
			}
		}
	});
	return false;
});
$("[name='inaccount']").on("change", function (event, result) {
	//找币种
	$("[name='currency").val("");
	var objectModel = {};
	objectModel['name']=this.value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource4",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='currency").val(data);
			}
		}
	});
	return false;
});
$("[name='outaccount']").on("change", function (event, result) {
	//找币种
	$("[name='currency").val("");
	var objectModel = {};
	objectModel['name']=this.value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource4",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='currency").val(data);
			}
		}
	});
	return false;
});
$("[name='plmtype']").on('change',function(e)
{
	var objectModel = {};
	objectModel['bindingtable']="flow_plmtypefinancetype";
	objectModel['bindingpara']="name";
	objectModel['para']="subtypename";
	objectModel['condition']="status=1";
	objectModel['value']=this.value;
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='accounttype']").empty();
				var count = data.length;
				console.log("xxx");
				console.log(data);
				var i = 0;
				var b="<option value=''>==请选择==</option>";
				for(i=0;i<count;i++){
				   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
				}
				$("[name='accounttype']").append(b);
				//$("[name='accounttype']").find("option").eq(1).prop("selected",true);
				//$("[name='accounttype']").trigger("change");
			}
		}
	});

});		
</script>
</eq>
<eq name="setting.title" value="外汇">
<script>
$("[name='inaccount']").on('change',function(e)
{
	var name=this.name;
	var objectModel = {};
	objectModel['account']=document.getElementsByName("inaccount")[0].value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource2",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='incurrency']").empty();
				var count = data.length;
				console.log(count);
				console.log(data);
				var i = 0;
				var b="";
				for(i=0;i<count;i++){
				   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
				}
				$("[name='incurrency").append(b);
				$("[name='incurrency").find("option").eq(0).prop("selected",true);
				$("[name='incurrency']").trigger("change");
			}
		}
	});

});
$("[name='outaccount']").on('change',function(e)
{
	var name=this.name;
	var objectModel = {};
	objectModel['account']=document.getElementsByName("outaccount")[0].value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource2",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='outcurrency']").empty();
				var count = data.length;
				console.log(count);
				console.log(data);
				var i = 0;
				var b="";
				for(i=0;i<count;i++){
				   b+="<option value='"+data[i].name+"'>"+data[i].name+"</option>";
				}
				$("[name='outcurrency").append(b);
				$("[name='outcurrency").find("option").eq(0).prop("selected",true);
				$("[name='outcurrency']").trigger("change");
			}
		}
	});

});
</script>
</eq>
<eq name="setting.title" value="税筹">
<script>
function getSource3(obj)
{
	var name=obj.name;
	if(name!="agreement")
	{
		return;
	}
	var objectModel = {};
	objectModel['agreement']=obj.value;
	console.log(objectModel);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource3",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				
				$("[name='inmainbody']").val(data.inmainbody);
				$("[name='outmainbody']").val(data.outmainbody);
				$("[name='contractmoney']").val(data.contractmoney);
				$("[name='money']").val(data.money);
				$("[name='payclassify']").val(data.payclassify);
				$("[name='plmtype']").val(data.plmtype);
				$("[name='plmsubtype']").val(data.plmsubtype);
				$("[name='plmname']").val(data.plmname);
				$("[name='accounttype']").val(data.accounttype);
				$("[name='classify']").val(data.classify);
				$("[name='taxtype']").val(data.taxtype);
				$("[name='taxrate']").val(data.taxrate);
				$("[name='taxmoney']").val(data.taxmoney);
				//$("[name='outaccount']").val(data.outaccount);
				//$("[name='inaccount']").val(data.inaccount);
				$("[name='taxleft']").val(data.taxleft);
				$("[name='contractmoneyleft']").val(data.contractmoneyleft);
				$("[name='returnmoneyleft']").val(data.returnmoneyleft);
				
				if($("[name='payclassify']").val()=="")
				{
					document.getElementsByName("td_支出分类")[0].style.display="none";
					document.getElementsByName("td_支出分类")[1].style.display="none";
				}
				if($("[name='plmtype']").val()=="")
				{
					document.getElementsByName("td_投资分类")[0].style.display="none";
					document.getElementsByName("td_投资分类")[1].style.display="none";
				}
				if($("[name='plmsubtype']").val()=="")
				{
					document.getElementsByName("td_投资子类")[0].style.display="none";
					document.getElementsByName("td_投资子类")[1].style.display="none";
				}
				if($("[name='plmname']").val()=="")
				{
					document.getElementsByName("td_项目名称")[0].style.display="none";
					document.getElementsByName("td_项目名称")[1].style.display="none";
				}
				if($("[name='accounttype']").val()=="")
				{
					document.getElementsByName("td_收支方式")[0].style.display="none";
					document.getElementsByName("td_收支方式")[1].style.display="none";
				}
				if($("[name='classify']").val()=="")
				{
					document.getElementsByName("td_分类")[0].style.display="none";
					document.getElementsByName("td_分类")[1].style.display="none";
				}
				
				
				$("[name='agreement']").attr("readonly",true);
				$("[name='inmainbody']").attr("readonly",true);
				$("[name='outmainbody']").attr("readonly",true);
				$("[name='contractmoney']").attr("readonly",true);
				$("[name='money']").attr("readonly",true);
				$("[name='payclassify']").attr("readonly",true);
				$("[name='plmtype']").attr("readonly",true);
				$("[name='plmsubtype']").attr("readonly",true);
				$("[name='plmname']").attr("readonly",true);
				$("[name='accounttype']").attr("readonly",true);
				$("[name='classify']").attr("readonly",true);
				$("[name='taxtype']").attr("readonly",true);
				$("[name='taxrate']").attr("readonly",true);
				$("[name='taxmoney']").attr("readonly",true);
				//$("[name='outaccount']").attr("readonly",true);
				//$("[name='inaccount']").attr("readonly",true);
				$("[name='taxleft']").attr("readonly",true);
				$("[name='contractmoneyleft']").attr("readonly",true);
				$("[name='returnmoneyleft']").attr("readonly",true);
				
				
			}
		}
	});

}
</script>
</eq>
<eq name="setting.title" value="转账">
<script>
$("[name='outaccountbill']").on('change',function(e)
{
	var name=this.name;
	var objectModel = {};
	objectModel['account']=document.getElementsByName("outaccountbill")[0].value;
	console.log(objectModel);
	$("[name='money").val(0);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource5",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='money").val(data);
			}
		}
	});

});
</script>
</eq>
<eq name="setting.title" value="支出">
<script>
$("[name='outaccountbill']").on('change',function(e)
{
	var name=this.name;
	var objectModel = {};
	objectModel['account']=document.getElementsByName("outaccountbill")[0].value;
	console.log(objectModel);
	$("[name='outaccountbillmoney").val(0);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource5",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='outaccountbillmoney").val(data);
			}
		}
	});

});
</script>
</eq>


<eq name="setting.title" value="借贷">
<script>
$("[name='loaner']").on('change',function(e)
{
	var name=this.name;
	var objectModel = {};
	objectModel['loaner']=document.getElementsByName("loaner")[0].value;
	console.log(objectModel);
	$("[name='creditmoney").val(0);
	$("[name='borrowmoney").val(0);
	$.ajax({
		cache:false,
		type:"POST",
		url:"__APP__/Flowform/getSource6",
		dataType:"json",
		data:objectModel,
		error:function(){
			//alert("网络错误");
		},
		success:function(data)
		{
			if((data!==undefined)&&(data!=="")&&(data!==null))
			{
				$("[name='creditmoney").val(data[0]);
				$("[name='borrowmoney").val(data[1]);
			}
		}
	});

});
</script>
</eq>