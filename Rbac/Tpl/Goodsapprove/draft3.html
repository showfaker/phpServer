<link rel="shortcut icon" href="favicon.ico">
<link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
<link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
<link href="css/plugins/chosen/chosen1.css" rel="stylesheet">
<link href="css/animate.css" rel="stylesheet">
<link href="css/style.css?v=4.1.0" rel="stylesheet">
<link rel="stylesheet" href="css/main.css">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal">×</button>
<h4 class="modal-title">新增供应商</h4>
</div>

<form id="format1" method="post" action="__URL__/insert" enctype="multipart/form-data" class="form-horizontal">    
	<div class="modal-body">
		<div class="form-group">
		<label class="col-sm-3 control-label">供应商名称：</label>
		<div class="col-sm-8">
			<input type="text" class="form-control" value="" name="supplier">
		</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">联系人：</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" value="" name="name">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">联系电话：</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" value="" name="telephone">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">供货地域：</label>
			
			<div class="col-sm-6">
			    <div style="margin-bottom:5px">
				    <select name="province" style="width:350px;height:35px;border:1px solid #ddd;font-size:14px">
						<option value="">请选择省份</option>
						<volist name="provinces" id="pro">
							<option value="{$pro.provinceid}">{$pro.province}</option>
                        </volist>						
					</select>
				</div>
				<div>
				    <select name="city" style="width:350px;height:35px;border:1px solid #ddd;font-size:14px">
						<option id="opt" value="">请选择城市</option>						
					</select>
				</div>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">商品种类：</label>
			<div class="col-sm-8">
				<select name="material" style="width:350px;height:35px;border:1px solid #ddd;font-size:14px">
					<option value="">请选择商品</option>
					<option value="器械">器械</option>
					<option value="营养品">营养品</option>
					<option value="服装">服装</option>										
				</select>
			</div>
		</div>
		
		<div class="form-group">
			<label class="col-sm-3 control-label">合同清单：</label>
			<div class="col-sm-8">			
				<input type="file" name="file" multiple="multiple" class="form-control">				
			</div>
		</div>
		<div class="btn1">
								
		</div>
	</div>	
	<div class="modal-footer">
		<button type="button" class="btn btn-sm btn-white pull-right m-t-n-xs" data-dismiss="modal" style="margin-left:10px">关闭</button>
		
		<button class="btn btn-sm btn-primary pull-right m-t-n-xs" type="button" id="sub"><strong>确定</strong>
		</button>
		
	</div>
</form> 
    <!-- Chosen -->
    <script src="js/plugins/chosen/chosen.jquery.js"></script>
    <script src="js/demo/form-advanced-demo.js"></script>
	<script src="js/plugins/prettyfile/bootstrap-prettyfile.js"></script>
	<script>
		$('input[type="file"]').prettyFile();
	</script>
	<script>
	    $("#sub").click(function(){
		    $(".btn1").children().remove();
		    var supplier=$('input[name=supplier]').val();
			var name=$('input[name=name]').val();
			var telephone=$('input[name=telephone]').val();
			var province=$('select[name=province]').val();
			var city=$('select[name=city]').val();
			var material=$('select[name=material]').val();
			var aa='';
			if(supplier==''){
			   aa="<span style='color:red;margin-left:70px'>供应商必填</span>";
			   $(".btn1").append(aa);
			   return;
			}
			if(name==''){
			   aa="<span style='color:red;margin-left:70px'>联系人必填</span>";
			   $(".btn1").append(aa);
			   return;
			}
			if(telephone==''){
			   aa="<span style='color:red;margin-left:70px'>联系电话必填</span>";
			   $(".btn1").append(aa);
			   return;
			}
			if(province==''){
			   aa="<span style='color:red;margin-left:70px'>供货地域必填</span>";
			   $(".btn1").append(aa);
			   return;
			}
			if(city==''){
			   aa="<span style='color:red;margin-left:70px'>供货地域必填</span>";
			   $(".btn1").append(aa);
			   return;
			}
			
			if(material==''){
			   aa="<span style='color:red;margin-left:70px'>商品种类必填</span>";
			   $(".btn1").append(aa);
			   return;
			}
		    $.ajax({
				url:'__URL__/ajax',
				type:'post',  
				data:{'supplier':supplier},
				dataType:'json',  
				success:function(data) {				
					if(data==1){
					   $("#format1").submit();
					   //location.href=location.href;  
					}else{
					   aa="<span style='color:red;margin-left:70px'>"+data+"</span>";
					   $(".btn1").append(aa);
					}
				 }  
			});
		})
	</script>
	
	<script>
	$("select[name='province']").change(function(){
	var provinceid=$(this).val();
	$("#opt").nextAll().remove();
	$.ajax({
			url:'__URL__/cityajax',
			type:'post',  
			data:{'provinceid':provinceid},
			dataType:'json',  
			success:function(data) {				
				if(data!='null'){
				var code='';
				for(var i=0;i<data.length;i++){
				code+="<option value='"+data[i]['cityid']+"'>"+data[i]['city']+"</option>";
				}
				$("select[name='city']").append(code);
				}
			 }  
		});
	});
	</script>