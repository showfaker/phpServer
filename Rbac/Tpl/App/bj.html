<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport"/>
    
    <link rel="shortcut icon" href="favicon.ico"> <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css?v=4.1.0" rel="stylesheet">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="__PUBLIC__/dwz/themes/css/core2.css">
	<link href="__PUBLIC__/mui/examples/hello-mui/css/mui.picker.css" rel="stylesheet" />
	<link href="__PUBLIC__/mui/examples/hello-mui/css/mui.poppicker.css" rel="stylesheet" />
	<style>
		.form-control {
		background: transparent;
		background-color: transparent;
	}
	</style>
</head>
<body class="gray-bg">
    <div class="wrapper wrapper-content">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
						<div style="text-align:left">
						<a href="__URL__/bj/projecttype/{$projecttype}/" class="btn btn-primary" style="margin-left:17px"><span>施工进度报警（{$count}）</span></a>
						<a href="__URL__/bj1/projecttype/{$projecttype}/" class="btn btn-white"><span>施工前报警（{$count1}）</span></a>
						</div>
                    </div>
                    <div class="ibox-content">
					
						
						
                        <div style="margin-bottom:10px;">
							<form action="__URL__/bj" method="post" id="form">
							    <div style="width:100%;" class="input-group">
									<select name="projectmanager" data-placeholder="选择项目经理" style="float:left;width:40%;height:32px" class="form-control" onchange="document.getElementById('form').submit()">
										<option value="">选择项目经理</option>
										<volist name="projectmanagers" id="uservo">
										<option <eq name="projectmanager" value="$uservo.projectmanager">selected</eq> value="{$uservo.projectmanager}" hassubinfo="true">{$uservo.projectmanager}</option>
										</volist>
									</select>
									<!--
									<select name="city" data-placeholder="选择城市" style="float:left;width:30%;height:32px" class="form-control" onchange="document.getElementById('form').submit()">
										<option value="">选择城市</option>
										<volist name="cities" id="cityvo">
										<option <eq name="city" value="$cityvo.city">selected</eq> value="{$cityvo.city}" hassubinfo="true">{$cityvo.city}</option>
										</volist>
									</select>
									-->
									
									<!--
									<select name="city" data-placeholder="选择城市" style="float:left;width:30%;height:32px" class="form-control" onchange="document.getElementById('form').submit()">
										<option value="">选择城市</option>
										<volist name="cities" id="cityvo">
										<option <eq name="city" value="$cityvo.city">selected</eq> value="{$cityvo.city}" hassubinfo="true">{$cityvo.city}</option>
										</volist>
									</select>
									-->
									<!--
									<input id='showCityPicker' placeholder="选择城市" readonly name="city" value="{$city}" class="form-control" style="width:30%;float:left;height:32px">
									-->
									<script src="__PUBLIC__/mui/examples/hello-mui/js/mui.min.js"></script>
									<!--<script src="../js/mui.picker.min.js"></script>-->
									<script src="__PUBLIC__/mui/examples/hello-mui/js/mui.picker.js"></script>
									<script src="__PUBLIC__/mui/examples/hello-mui/js/mui.poppicker.js"></script>
									<script src="__PUBLIC__/mui/examples/hello-mui/js/city1.data.js" type="text/javascript" charset="utf-8"></script>
									<script>
										(function($, doc) {
											$.init();
											$.ready(function() {
												//级联示例
												var cityPicker = new $.PopPicker({
													layer: 2
												});
												cityPicker.setData(cityData);
												var showCityPickerButton = doc.getElementById('showCityPicker');
												showCityPickerButton.addEventListener('tap', function(event) {
													cityPicker.show(function(items) {
														showCityPickerButton.value = items[1].text;
														//返回 false 可以阻止选择框的关闭
														//return false;
														document.getElementById('form').submit();
													});
												}, false);
											});
										})(mui, document);
									</script>
									
									<select name="worktype" data-placeholder="选择专项" style="float:left;width:30%;height:32px;margin-left:10px" class="form-control" onchange="document.getElementById('form').submit()">
										<option value="">专项</option>
										<volist name="worktypes" id="worktypevo">
										<option <eq name="worktype" value="$worktypevo.title">selected</eq> value="{$worktypevo.title}" hassubinfo="true">{$worktypevo.title}</option>
										</volist>
									</select>
							    </div>
							</form>
                        </div>
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
								<tr>			
									<th width="16%">项目名称</th>
									<th width="7%">专项</th>
									<th width="13%">计划周期</th>
									<th width="7%">今日预计进度</th>
									<th width="5%">当前进度</th>
									<th width="5%">进度差</th>
									<th width="8%" class="hidden-xs">报警发生时间</th>
									<th width="8%">当前节点</th>
								</tr>
							</thead>
							<tbody>
								<volist name="list" id="listmenu">
								<tr >
									<td>
									<eq name="app" value="1">
									<a href="__APP__/App/plmdetail/id/{$listmenu.plminfo.id}/app/1/tab/2">{$listmenu.plminfo.title}</a>
									</eq>
									<neq name="app" value="1">
									<a href="__APP__/Xmtj/plmdetail/id/{$listmenu.plminfo.id}/tab/2">{$listmenu.plminfo.title}</a>
									</neq>
									</td>
									<td>{$listmenu.worktype}</td>
									<td>{$listmenu.plantimebegin} ~ {$listmenu.plantimeend}</td>
									<td style="color:blue">{$listmenu.planpercent}</td>
									<td style="color:blue">{$listmenu.realpercent}</td>
									<td style="color:red">{$listmenu.d}</td>
									<td class="hidden-xs"><?php 
											if($listmenu['warning_time']!=0)
											echo date('Y-m-d',$listmenu['warning_time']);?>
									</td>
									<td>
									<a href="__URL__/subworktype/id/{$listmenu['plminfo']['id']}/worktype/{$listmenu.daily.worktype}" style="color:blue">{$listmenu.daily.subworktype}
									</a>
									</td>
								</tr>
								</volist>
							</tbody>
                        </table>
						<div class="panelBar"><div class="pagination" targetType="navTab" totalCount="{$totalCount}" numPerPage="{$numPerPage}" pageNumShown="10" currentPage="{$currentPage}">{$page}</div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
	
	
	<div id="modal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
		<div class="modal-content">
		   <div class="modal-header">  
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">  
                    <span aria-hidden="true">×</span>  
                </button>  
                <h4 class="modal-title" id="myModalLabel">Modal title</h4>  
            </div>  
            <div class="modal-body">  
                <p>One fine body…</p>  
            </div>  
            <div class="modal-footer">  
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>  
                <button type="button" class="btn btn-primary">Save</button>  
            </div>  
		</div>
	  </div>
	</div>
	
	
    <script src="js/jquery.min.js?v=2.1.4"></script>
    <script src="js/bootstrap.min.js?v=3.3.6"></script>
	<script src="js/plugins/layer/laydate/laydate.js"></script>
	
	<table style="display:none">
		<tbody>
		<volist name="allprojects" id="project" key="i">
			<tr target="sid_obj">
				<td class="addressvalue" id="{$project.id}">{$project.value}</td>
			</tr>
		</volist>
		</tbody>
	</table>
	<script src="js/plugins/suggest/bootstrap-suggest.min.js"></script>
	<script>
		var dataarray=[];
		$(".addressvalue").each(function(i){
			dataarray[i]={
				id:this.id,
				word:$(this).html()
			};
		})
		//data 数据中获取
		var testdataBsSuggest = $("#address-search").bsSuggest({
			indexId: 0, //每组数据的第几个数据，作为input输入框的 data-id，设为 -1 且 idField 为空则不设置此值
			indexKey: 1, //data.value 的第几个数据，作为input输入框的内容
			data: {
				'value': dataarray
			}
		});
		
		$("input#address-search").on("onSetSelectValue", function (event, result) {
			//console.log(result.id);
		});
	</script>
</body>
</html>